import{d,o as i,c as l,a as o,F as R,r as P,t as E,u as w,b as f,w as F,e as _,f as U,g as x,h as M}from"./index-9de96461.js";const B=d({__name:"ActionButtons",emits:["writeSerial","startListening"],setup(e,{emit:t}){return(n,a)=>(i(),l("div",null,[o("button",{onClick:a[0]||(a[0]=r=>t("writeSerial"))},"Write Serial"),o("button",{onClick:a[1]||(a[1]=r=>t("startListening"))},"Start Listening")]))}}),H=d({__name:"SerialResponsesList",props:{serialResponses:{type:Array,required:!0}},setup(e){return(t,n)=>(i(),l("ol",null,[(i(!0),l(R,null,P(e.serialResponses,a=>(i(),l("li",{key:a.timestamp},E(a.message),1))),128))]))}}),V=d({__name:"TeaDetailsNavbar",setup(e){const t=w(),n=()=>{t.push("/")};return(a,r)=>(i(),l("button",{onClick:r[0]||(r[0]=u=>n())},"Back"))}}),G=d({__name:"TeaDetailsMake",setup(e){const t=w(),n=()=>{t.push("/MakeTea")};return(a,r)=>(i(),l("button",{onClick:r[0]||(r[0]=u=>n())},"Back"))}}),j=(e,t)=>e.value.find(n=>n.slug===t);var q=Object.defineProperty,N=(e,t)=>{for(var n in t)q(e,n,{get:t[n],enumerable:!0})},z={};N(z,{convertFileSrc:()=>K,invoke:()=>D,transformCallback:()=>v});function J(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function v(e,t=!1){let n=J(),a=`_${n}`;return Object.defineProperty(window,a,{value:r=>(t&&Reflect.deleteProperty(window,a),e==null?void 0:e(r)),writable:!1,configurable:!0}),n}async function D(e,t={}){return new Promise((n,a)=>{let r=v(c=>{n(c),Reflect.deleteProperty(window,`_${u}`)},!0),u=v(c=>{a(c),Reflect.deleteProperty(window,`_${r}`)},!0);window.__TAURI_IPC__({cmd:e,callback:r,error:u,...t})})}function K(e,t="asset"){let n=encodeURIComponent(e);return navigator.userAgent.includes("Windows")?`https://${t}.localhost/${n}`:`${t}://localhost/${n}`}async function y(e){return D("tauri",e)}var Q={};N(Q,{TauriEvent:()=>k,emit:()=>ee,listen:()=>C,once:()=>X});async function A(e,t){return y({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:t}})}async function Y(e,t,n){await y({__tauriModule:"Event",message:{cmd:"emit",event:e,windowLabel:t,payload:n}})}async function S(e,t,n){return y({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:t,handler:v(n)}}).then(a=>async()=>A(e,a))}async function Z(e,t,n){return S(e,t,a=>{n(a),A(e,a.id).catch(()=>{})})}var k=(e=>(e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_CREATED="tauri://window-created",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_FILE_DROP="tauri://file-drop",e.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",e.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",e.MENU="tauri://menu",e.CHECK_UPDATE="tauri://update",e.UPDATE_AVAILABLE="tauri://update-available",e.INSTALL_UPDATE="tauri://update-install",e.STATUS_UPDATE="tauri://update-status",e.DOWNLOAD_PROGRESS="tauri://update-download-progress",e))(k||{});async function C(e,t){return S(e,null,t)}async function X(e,t){return Z(e,null,t)}async function ee(e,t){return Y(e,void 0,t)}const te={style:{display:"inline-flex"}},ne={style:{"flex-direction":"column"}},se=d({__name:"TeaDetails",async setup(e){let t,n;const a=U(),r=w(),{slug:u}=a.params,c=f(M),p=f(j(c,u)),g=f([]),L=s=>{r.push(`/makeTea/${s}`)},$=async()=>{try{const s=await D("write_serial",{message:"Hello!"});console.log(s)}catch(s){console.log(s)}},b=async()=>{try{await D("start_action")}catch(s){console.log(s)}};return[t,n]=F(()=>C("read_serial",s=>{console.log(s);let m=s.payload;g.value.push({timestamp:Date.now(),message:m})})),await t,n(),(s,m)=>{var W,O,T;const h=x("Icon");return i(),l(R,null,[_(V),o("h2",null,E((W=p.value)==null?void 0:W.name)+" - Tea Details",1),o("div",te,[o("div",ne,[o("div",null,[_(h,{class:"previewImage",iconFileName:(O=p.value)==null?void 0:O.iconFileName},null,8,["iconFileName"])]),o("div",null,[_(G)]),o("div",null,[o("button",{onClick:m[0]||(m[0]=ae=>{var I;return L((I=p.value)==null?void 0:I.id)}),class:"makeButton"},"Make! ‚èµ")])]),o("div",null,[o("p",null,E((T=p.value)==null?void 0:T.description),1)])]),_(B,{onWriteSerial:$,onStartListening:b}),_(H,{serialResponses:g.value},null,8,["serialResponses"])],64)}}});export{se as default};
